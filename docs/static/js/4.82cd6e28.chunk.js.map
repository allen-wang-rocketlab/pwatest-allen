{"version":3,"sources":["components/Video/Video.js"],"names":["Video","useEffect","selectedDeviceId","codeReader","BrowserMultiFormatReader","console","log","getVideoInputDevices","then","videoInputDevices","sourceSelect","document","getElementById","deviceId","length","forEach","element","sourceOption","createElement","text","label","value","appendChild","onchange","style","display","addEventListener","decodeFromInputVideoDeviceContinuously","result","err","textContent","NotFoundException","error","reset","catch","className","id","htmlFor","maxWidth","width","height","border"],"mappings":"sHAAA,yCAuGeA,UAnGD,WAuDZ,OAtDAC,qBAAU,WACR,IAAIC,EACEC,EAAa,IAAIC,2BACvBC,QAAQC,IAAI,iCACZH,EACGI,uBACAC,MAAK,SAAAC,GACJ,IAAMC,EAAeC,SAASC,eAAe,iBAC7CV,EAAmBO,EAAkB,GAAGI,SACpCJ,EAAkBK,QAAU,KAC9BL,EAAkBM,SAAQ,SAAAC,GACxB,IAAMC,EAAeN,SAASO,cAAc,UAC5CD,EAAaE,KAAOH,EAAQI,MAC5BH,EAAaI,MAAQL,EAAQH,SAC7BH,EAAaY,YAAYL,MAE3BP,EAAaa,SAAW,WACtBrB,EAAmBQ,EAAaW,OAERV,SAASC,eACjC,qBAEgBY,MAAMC,QAAU,SAEpCd,SAASC,eAAe,eAAec,iBAAiB,SAAS,WAC/DvB,EAAWwB,uCACTzB,EACA,SACA,SAAC0B,EAAQC,GACHD,IACFvB,QAAQC,IAAIsB,GACZjB,SAASC,eAAe,UAAUkB,YAAcF,EAAOT,OAErDU,GAASA,aAAeE,sBAC1B1B,QAAQ2B,MAAMH,GACdlB,SAASC,eAAe,UAAUkB,YAAcD,MAItDxB,QAAQC,IAAR,uDACkDJ,OAGpDS,SAASC,eAAe,eAAec,iBAAiB,SAAS,WAC/DvB,EAAW8B,QACXtB,SAASC,eAAe,UAAUkB,YAAc,GAChDzB,QAAQC,IAAI,gBAGf4B,OAAM,SAAAL,GACLxB,QAAQ2B,MAAMH,QAEjB,IAGD,6BACE,6BACE,wBAAIM,UAAU,SAAd,kBAEA,6BACE,4BAAQC,GAAG,cAAcD,UAAU,gBAAnC,SAGA,4BAAQC,GAAG,cAAcD,UAAU,gBAAnC,UAKF,yBAAKC,GAAG,oBAAoBZ,MAAO,CAAEC,QAAS,SAC5C,2BAAOY,QAAQ,eAAeF,UAAU,gBAAxC,wBAGA,4BACEC,GAAG,eACHD,UAAU,eACVX,MAAO,CAAEc,SAAU,YAIvB,yBAAKH,UAAU,gBACb,0CACA,6BACE,2BAAOC,GAAG,aAGd,6BACE,2BACEA,GAAG,QACHG,MAAM,MACNC,OAAO,OACPhB,MAAO,CAAEiB,OAAQ,yB","file":"static/js/4.82cd6e28.chunk.js","sourcesContent":["import \"./Video.css\";\nimport React, { useEffect } from \"react\";\nimport { BrowserMultiFormatReader, NotFoundException } from \"@zxing/library\";\n\nconst Video = () => {\n  useEffect(() => {\n    let selectedDeviceId;\n    const codeReader = new BrowserMultiFormatReader();\n    console.log(\"ZXing code reader initialized\");\n    codeReader\n      .getVideoInputDevices()\n      .then(videoInputDevices => {\n        const sourceSelect = document.getElementById(\"sourceSelect\");\n        selectedDeviceId = videoInputDevices[0].deviceId;\n        if (videoInputDevices.length >= 1) {\n          videoInputDevices.forEach(element => {\n            const sourceOption = document.createElement(\"option\");\n            sourceOption.text = element.label;\n            sourceOption.value = element.deviceId;\n            sourceSelect.appendChild(sourceOption);\n          });\n          sourceSelect.onchange = () => {\n            selectedDeviceId = sourceSelect.value;\n          };\n          const sourceSelectPanel = document.getElementById(\n            \"sourceSelectPanel\"\n          );\n          sourceSelectPanel.style.display = \"block\";\n        }\n        document.getElementById(\"startButton\").addEventListener(\"click\", () => {\n          codeReader.decodeFromInputVideoDeviceContinuously(\n            selectedDeviceId,\n            \"video\",\n            (result, err) => {\n              if (result) {\n                console.log(result);\n                document.getElementById(\"result\").textContent = result.text;\n              }\n              if (err && !(err instanceof NotFoundException)) {\n                console.error(err);\n                document.getElementById(\"result\").textContent = err;\n              }\n            }\n          );\n          console.log(\n            `Started continous decode from camera with id ${selectedDeviceId}`\n          );\n        });\n        document.getElementById(\"resetButton\").addEventListener(\"click\", () => {\n          codeReader.reset();\n          document.getElementById(\"result\").textContent = \"\";\n          console.log(\"Reset.\");\n        });\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }, []);\n\n  return (\n    <div>\n      <div>\n        <h1 className=\"title\">Scan a product</h1>\n\n        <div>\n          <button id=\"startButton\" className=\"actionButton\">\n            Start\n          </button>\n          <button id=\"resetButton\" className=\"actionButton\">\n            Reset\n          </button>\n        </div>\n\n        <div id=\"sourceSelectPanel\" style={{ display: \"none\" }}>\n          <label htmlFor=\"sourceSelect\" className=\"sourceSelect\">\n            Change video source:\n          </label>\n          <select\n            id=\"sourceSelect\"\n            className=\"sourceSelect\"\n            style={{ maxWidth: \"400px\" }}\n          ></select>\n        </div>\n\n        <div className=\"resultOutput\">\n          <label>Result:</label>\n          <div>\n            <label id=\"result\"></label>\n          </div>\n        </div>\n        <div>\n          <video\n            id=\"video\"\n            width=\"70%\"\n            height=\"auto\"\n            style={{ border: \"1px solid gray\" }}\n          ></video>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Video;\n"],"sourceRoot":""}